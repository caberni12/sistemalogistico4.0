<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ubicaciones PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://unpkg.com/html5-qrcode"></script>

<style>
/* ===== RESET REAL ===== */
*{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

input,button{
  font-family:inherit;
  outline:none;
}

/* ===== VARIABLES ===== */
:root{
  --green:#22c55e;
  --turq:#14b8a6;
  --bg:#f4f6f8;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --shadow:0 12px 30px rgba(0,0,0,.12);
}

/* ===== BODY ===== */
body{
  margin:0;
  background:var(--bg);
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  color:var(--text);
}

/* ===== HEADER ===== */
header{
  background:var(--card);
  padding:16px;
  font-weight:800;
  font-size:18px;
  box-shadow:var(--shadow);
  display:flex;
  align-items:center;
  gap:10px;
}

/* ===== TABS ===== */
.tabs{
  display:flex;
  gap:10px;
  padding:14px;
}

.tabs button{
  flex:1;
  padding:14px;
  border:none;
  border-radius:18px;
  background:var(--card);
  font-weight:700;
  box-shadow:var(--shadow);
}

.tabs button.active{
  background:linear-gradient(135deg,var(--green),var(--turq));
  color:#fff;
}

/* ===== CARD ===== */
.card{
  background:var(--card);
  margin:14px;
  padding:18px;
  border-radius:22px;
  box-shadow:var(--shadow);
}

/* ===== LABELS ===== */
.label{
  margin-top:14px;
  font-size:13px;
  font-weight:800;
  color:var(--muted);
}

/* ===== INPUTS ===== */
.input-wrap{
  display:flex;
  gap:10px;
  margin-top:6px;
}

.input-wrap input{
  flex:1;
  padding:16px;
  font-size:16px;
  border-radius:18px;
  border:2px solid #e5e7eb;
  background:#fff;
}

.input-wrap input:focus{
  border-color:var(--turq);
}

.scan-btn{
  width:56px;
  border:none;
  border-radius:18px;
  background:var(--turq);
  color:#fff;
  font-size:22px;
}

/* ===== ACTIONS ===== */
.actions{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-top:20px;
}

.btn-green{
  background:linear-gradient(135deg,#16a34a,#22c55e);
  color:#fff;
  border:none;
  padding:16px;
  border-radius:20px;
  font-weight:900;
}

.btn-gray{
  background:#e5e7eb;
  border:none;
  padding:16px;
  border-radius:20px;
  font-weight:800;
}

/* ===== SCANNER ===== */
#scannerBox{
  margin-top:16px;
  height:260px;
  border-radius:20px;
  overflow:hidden;
  display:none;
  box-shadow:var(--shadow);
}

/* ===== LIST ===== */
.item{
  background:#f8fafc;
  padding:16px;
  border-radius:20px;
  margin-bottom:12px;
}

.stock{
  font-size:28px;
  font-weight:900;
}
</style>
</head>

<body>

<header>üìç Ubicaciones PRO</header>

<div class="tabs">
  <button class="active" onclick="openTab('ingreso',this)">Ingreso</button>
  <button onclick="openTab('consulta',this)">Consulta</button>
</div>

<!-- ===== INGRESO ===== -->
<div id="ingreso" class="card tab">

  <div class="label">Ubicaci√≥n</div>
  <div class="input-wrap">
    <input id="ubicacion" placeholder="Escanear ubicaci√≥n">
    <button class="scan-btn" onclick="startScan('ubicacion')">üì∑</button>
  </div>

  <div class="label">Producto</div>
  <div class="input-wrap">
    <input id="producto" placeholder="Escanear producto">
    <button class="scan-btn" onclick="startScan('producto')">üì∑</button>
  </div>

  <div class="label">Cantidad</div>
  <input id="cantidad" type="number" value="1" style="margin-top:6px">

  <div id="scannerBox"></div>

  <div class="actions">
    <button class="btn-green">Guardar</button>
    <button class="btn-gray" onclick="limpiar()">Limpiar</button>
  </div>

</div>

<!-- ===== CONSULTA ===== -->
<div id="consulta" class="card tab" style="display:none">
  <div class="item">
    <b>BCI201</b>
    <div>BAST√ìN RETR√ÅCTIL</div>
    <div class="stock">960</div>
  </div>
</div>

<script>
let scanner;
let activeInput;

function openTab(id,btn){
  document.querySelectorAll('.tab').forEach(t=>t.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.tabs button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

function startScan(inputId){
  activeInput=document.getElementById(inputId);
  document.getElementById('scannerBox').style.display='block';

  if(!scanner){
    scanner=new Html5Qrcode("scannerBox");
  }

  Html5Qrcode.getCameras().then(cams=>{
    scanner.start(
      cams[0].id,
      { fps:10, qrbox:220 },
      txt=>{
        activeInput.value=txt;
        stopScan();
      }
    );
  });
}

function stopScan(){
  if(scanner){
    scanner.stop();
    document.getElementById('scannerBox').style.display='none';
  }
}

function limpiar(){
  document.querySelectorAll('input').forEach(i=>i.value='');
}
</script>

</body>
</html>
