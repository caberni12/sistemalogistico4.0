
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ubicaciones PRO</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<!-- SCANNER REAL -->
<script src="https://unpkg.com/html5-qrcode"></script>

<style>
:root{
  --verde:#22c55e;
  --turquesa:#14b8a6;
  --blanco:#ffffff;
  --fondo:#f1f5f9;
  --texto:#0f172a;
  --muted:#64748b;
  --borde:#e5e7eb;
  --sombra:0 12px 30px rgba(0,0,0,.12);
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--fondo);
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  color:var(--texto);
}

/* ===== HEADER ===== */
header{
  background:var(--blanco);
  padding:16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:var(--sombra);
}

header b{
  font-size:18px;
}

/* ===== TABS ===== */
.tabs{
  display:flex;
  gap:10px;
  padding:14px;
}

.tabs button{
  flex:1;
  padding:14px;
  border:none;
  border-radius:16px;
  background:var(--blanco);
  font-weight:700;
  box-shadow:var(--sombra);
  color:var(--texto);
}

.tabs button.active{
  background:linear-gradient(135deg,var(--verde),var(--turquesa));
  color:#fff;
}

/* ===== CARD ===== */
.card{
  background:var(--blanco);
  margin:14px;
  padding:18px;
  border-radius:22px;
  box-shadow:var(--sombra);
}

/* ===== INPUTS ===== */
.label{
  margin-top:14px;
  font-size:13px;
  font-weight:700;
  color:var(--muted);
}

.input-scan{
  display:flex;
  gap:10px;
  margin-top:6px;
}

.input-scan input{
  flex:1;
  padding:16px;
  border-radius:16px;
  border:1px solid var(--borde);
  font-size:16px;
}

.scan-btn{
  width:56px;
  border:none;
  border-radius:16px;
  background:var(--turquesa);
  color:#fff;
  font-size:22px;
}

input[readonly]{
  background:#f8fafc;
}

/* ===== BOTONES ===== */
.actions{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
  margin-top:20px;
}

.btn-green{
  background:linear-gradient(135deg,#16a34a,#22c55e);
  color:#fff;
  border:none;
  padding:16px;
  border-radius:18px;
  font-size:16px;
  font-weight:800;
}

.btn-gray{
  background:#e5e7eb;
  border:none;
  padding:16px;
  border-radius:18px;
  font-weight:700;
}

/* ===== SCANNER ===== */
#scanner{
  margin-top:16px;
  border-radius:20px;
  overflow:hidden;
  display:none;
}

/* ===== LISTA ===== */
.item{
  background:#f8fafc;
  padding:16px;
  border-radius:18px;
  margin-bottom:12px;
}

.item .top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.badge{
  background:var(--verde);
  color:#fff;
  padding:6px 14px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
}

.stock{
  font-size:26px;
  font-weight:900;
}

/* ===== MODAL ===== */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}

.modal.active{display:flex}

.modal-card{
  background:#fff;
  padding:20px;
  border-radius:22px;
  width:90%;
  max-width:420px;
  box-shadow:var(--sombra);
  text-align:center;
}
</style>
</head>

<body>

<header>
  <b>üìç Ubicaciones PRO</b>
  <span>Demo</span>
</header>

<div class="tabs">
  <button class="active" onclick="openTab('ingreso',this)">Ingreso</button>
  <button onclick="openTab('consulta',this)">Consulta</button>
</div>

<!-- ===== INGRESO ===== -->
<div id="ingreso" class="card tab">

  <div class="label">Ubicaci√≥n</div>
  <div class="input-scan">
    <input id="ubicacion" placeholder="Escanear ubicaci√≥n">
    <button class="scan-btn" onclick="startScan('ubicacion')">üì∑</button>
  </div>

  <div class="label">Producto</div>
  <div class="input-scan">
    <input id="codigo" placeholder="Escanear producto">
    <button class="scan-btn" onclick="startScan('codigo')">üì∑</button>
  </div>

  <div class="label">Descripci√≥n</div>
  <input id="descripcion" readonly placeholder="Autom√°tica">

  <div class="label">Cantidad</div>
  <input id="cantidad" type="number" value="1">

  <div id="scanner"></div>

  <div class="actions">
    <button class="btn-green" onclick="guardar()">Guardar</button>
    <button class="btn-gray" onclick="limpiar()">Limpiar</button>
  </div>

</div>

<!-- ===== CONSULTA ===== -->
<div id="consulta" class="card tab" style="display:none">

  <div class="item">
    <div class="top">
      <b>BCI201</b>
      <span class="badge">VIGENTE</span>
    </div>
    <div>BAST√ìN RETR√ÅCTIL</div>
    <div class="stock">960</div>
  </div>

</div>

<!-- ===== MODAL ===== -->
<div id="modal" class="modal">
  <div class="modal-card">
    <h3>‚úîÔ∏è Guardado</h3>
    <p>Movimiento registrado correctamente</p>
    <button class="btn-green" onclick="closeModal()">Aceptar</button>
  </div>
</div>

<script>
let html5QrCode;
let targetInput=null;

function openTab(id,btn){
  document.querySelectorAll('.tab').forEach(t=>t.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.tabs button').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

function startScan(inputId){
  targetInput=document.getElementById(inputId);
  document.getElementById('scanner').style.display='block';

  if(!html5QrCode){
    html5QrCode=new Html5Qrcode("scanner");
  }

  Html5Qrcode.getCameras().then(cameras=>{
    html5QrCode.start(
      cameras[0].id,
      { fps:10, qrbox:250 },
      txt=>{
        targetInput.value=txt;
        stopScan();
      }
    );
  });
}

function stopScan(){
  if(html5QrCode){
    html5QrCode.stop();
    document.getElementById('scanner').style.display='none';
  }
}

function guardar(){
  document.getElementById('modal').classList.add('active');
}

function closeModal(){
  document.getElementById('modal').classList.remove('active');
}

function limpiar(){
  document.querySelectorAll('input').forEach(i=>i.value='');
}
</script>

</body>
</html>
